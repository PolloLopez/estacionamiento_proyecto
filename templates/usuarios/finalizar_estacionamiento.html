{% extends "base.html" %}
{% block title %}Finalizar Estacionamiento{% endblock %}

{% block content %}
<section class="panel">
  <h2>Finalizar estacionamiento</h2>

  <!-- Si hay error, se muestra en rojo -->
  {% if error %}
    <p style="color:red">{{ error }}</p>
  {% endif %}

  <!-- Si hay mensaje de Ã©xito, se muestra -->
  {% if mensaje %}
    <p style="color:green">{{ mensaje }}</p>
    <p>Saldo restante: ${{ usuario.saldo }}</p>
  {% endif %}

  <!-- Tarjeta con detalles del estacionamiento -->
  <div class="card">
    <h3>Detalles</h3>
    <p>Patente: <strong>{{ estacionamiento.vehiculo.patente }}</strong></p>
    <p>Inicio: {{ estacionamiento.hora_inicio }}</p>
    <p>DuraciÃ³n real: {{ estacionamiento.duracion_real }}</p>
    <p>Costo calculado: <strong>${{ estacionamiento.costo }}</strong></p>
  </div>

  <!-- Formulario para confirmar finalizaciÃ³n -->
  <form method="post" action="{% url 'usuarios_finalizar_estacionamiento' estacionamiento.id %}">
    {% csrf_token %}
    <div class="form-row actions">
      <button class="btn primary">Pagar y finalizar</button>
      <!-- BotÃ³n de cancelar vuelve al inicio de usuarios -->
      <a class="btn link" href="{% url 'inicio_usuarios' %}">Cancelar</a>
    </div>
  </form>
  <div class="actions">
  {% if request.user.es_inspector %}
    <a href="{% url 'panel_inspectores' %}" class="btn link">ğŸ  Volver al inicio</a>
  {% elif request.user.es_vendedor %}
    <a href="{% url 'panel_vendedores' %}" class="btn link">ğŸ  Volver al inicio</a>
  {% elif request.user.es_admin %}
    <a href="{% url 'panel_admin' %}" class="btn link">ğŸ  Volver al inicio</a>
  {% else %}
    <a href="{% url 'inicio_usuarios' %}" class="btn link">ğŸ  Volver al inicio</a>
  {% endif %}
</div>

</section>
{% endblock %}
