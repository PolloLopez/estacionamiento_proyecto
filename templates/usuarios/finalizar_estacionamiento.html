{% extends "base.html" %}
{% block title %}Finalizar Estacionamiento{% endblock %}

{% block content %}
<section class="panel">
  <h2>Finalizar estacionamiento</h2>

  <!-- Si hay error, se muestra en rojo -->
  {% if error %}
    <p style="color:red">{{ error }}</p>
  {% endif %}

  <!-- Si hay mensaje de éxito, se muestra -->
  {% if mensaje %}
    <p style="color:green">{{ mensaje }}</p>
    <p>Saldo restante: ${{ usuario.saldo }}</p>
  {% endif %}

  <!-- Tarjeta con detalles del estacionamiento -->
  <div class="card">
    <h3>Detalles</h3>
    <p>Patente: <strong>{{ estacionamiento.vehiculo.patente }}</strong></p>
    <p>Inicio: {{ estacionamiento.hora_inicio }}</p>
    <p>Duración real: {{ estacionamiento.duracion_real }}</p>
    <p>Costo calculado: <strong>${{ estacionamiento.costo }}</strong></p>
  </div>

  <!-- Formulario para confirmar finalización -->
  <form method="post" action="{% url 'usuarios_finalizar_estacionamiento' estacionamiento.id %}">
    {% csrf_token %}
    <div class="form-row actions">
      <button class="btn primary">Pagar y finalizar</button>
      <!-- Botón de cancelar vuelve al inicio de usuarios -->
      <a class="btn link" href="{% url 'inicio_usuarios' %}">Cancelar</a>
    </div>
  </form>
</section>
{% endblock %}
